<span content-for="title">{{pageTitle}}</span>
<div content-for="new">
    <i class="fa fa-lg fa-file" ng-hide="projectWarning" ng-click="createSurveyResponse(project_id)"></i>
</div>
<div content-for="refreshContents">
    <i class="fa fa-lg fa-arrow-circle-down" ng-hide="projectWarning" ng-click="$refreshContents()"></i>
</div>
<div content-for="context-info">
  <span class="context-info">{{project_name}}</span>
</div>

<div class="scrollable">  
   <div class="scrollable-content">
    <div class="list-group">
      <div class="input-group">
        <input type="search" class="form-control app-search" placeholder="Search.." ng-model="searchText" />
        <span class="input-group-addon" ng-click="searchText = ''"><a><i class="fa fa-search-minus"></i></a></span>
      </div>
      <div class="list-group-item alert-danger" ng-show="projectWarning">
        <p>{{projectWarning}}</p>
      </div>
      <div class="panel-group" id="accordion">
          <div class="panel panel-default" ng-repeat="item in submissions | filter:searchText" ng-class="item.status">

            <!-- server only -->
            <div ng-If="item.status == 'server'">
              <div class="panel-heading" >
                    <div class="pull-left" toggle target="{{ item.submission_uuid }} ">
                        <h4 class="panel-title" style="display:inline-block;">
                            {{ item.created }} 
                        </h4>
                    </div>
                    <div class="panel-title pull-right">
                        <i class="fa fa-download fa-lg" ng-click="downloadSubmission(item)"></i>
                    </div>
              </div>

              <div id="{{ item.submission_uuid }}" toggleable active-class="in" exclusion-group="accordion1" class="panel-collapse collapse" style="clear: both;">
                <div class="panel-body" ng-bind-html="item.html"></div>
              </div>
            </div>

            <!-- local -->
            <div ng-If="item.status !='server'">
              <div class="panel-heading" >
                <div class="pull-left" toggle target="{{item.submission_id || item.submission_uuid}} ">
                    <h4 class="panel-title" ng-class="item.status" style="display:inline-block;">
                       {{ item.created }}
                    </h4>
                </div>
                <div class="pull-right" ng-hide="deletedProject">
                  <i class=" panel-title fa fa-eye fa-lg" ng-show="item.status == 'outdated'" ng-click="compare(item)" toggle target="{{item.submission_id || item.submission_uuid}} "></i>
                  <i class="panel-title fa fa-pencil fa-lg" ng-hide="item.status == 'outdated'|| item.status == 'server-deleted'" ng-click="editSurveyResponse(item)"></i>
                  <i class="panel-title fa fa-upload fa-lg" ng-show="item.is_modified" ng-click="postSubmission(item)"></i>
                  <i class="panel-title fa fa-times fa-lg" ng-click="deleteSubmission(item)"></i>
                </div>
              </div>
              <div id="{{item.submission_id || item.submission_uuid}}" toggleable active-class="in" exclusion-group="accordion1" class="panel-collapse collapse" style="clear: both;">
                <div class="status-title" ng-show="item.status == 'outdated'">
                  Local
                  <i class="pull-right fa fa-lg fa-thumbs-o-up" toggle target="{{item.submission_id || item.submission_uuid}} " ng-click="takeLocalSubmission(item)"></i>
                </div>
                <div class="panel-body" ng-bind-html="item.html"></div>
                <div class="status-title" ng-show="item.status == 'outdated'">
                  Lastest on server
                  <i class="pull-right fa fa-lg fa-thumbs-o-up" toggle target="{{item.submission_id || item.submission_uuid}} " ng-click="takeServerSubmission(item)"></i>
                </div>
                <div class="panel-body" ng-show="item.status == 'outdated'" style="text-decoration:none" ng-bind-html="item.serverSubmission.html"></div>
              </div>
            </div>

          </div>  
      </div>
    </div>
  </div>
</div>
